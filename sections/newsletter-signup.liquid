{% if section.settings.bg_color != blank %}
<style>
  .index-newsletter_signup-section {
    background-color: {{ section.settings.bg_color }};
  }
</style>
{% endif %}

<div class="newsletter-wrapper">
    <div>
        <h3 class="heading">{{ section.settings.heading }}</h3>
        <p class="sub-heading">{{ section.settings.sub_heading }}</p>
        <div class="newsletter-form">
            {% form 'customer' %}
              {{ form.errors | default_errors }}
              {% if form.posted_successfully? %}
                <div class="newsletter--form">
                  <div class="note form-success">{{ 'general.newsletter_form.newsletter_confirmation' | t }}</div>
                </div>
              {% else %}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <div class="newsletter--form">
                  <div class="input-group newsletter_back_new">
                    <input type="email" value="{% if customer %}{{ customer.email }}{% endif %}" placeholder="Your email address" name="contact[email]" id="Email" class="input-group-field newsletter__input" autocorrect="off" autocapitalize="off">
                    <span class="input-group-btn">
                      <button type="submit" class="btn newsletter__submit">
                        SUBSCRIBE
                      </button>
                    </span>
                  </div>
                  <label class="checkbox-wrapper" for="consent">
                    <input type="checkbox" name="consent" id="consent" required />
                    <span>Yes, I'd like to receive updates on blog post, promotions and menstrual care news</span>
                  </label>
                </div>
              {% endif %}
            {% endform %}
        </div>
    </div>
</div>

{% schema %}
{
  "name": "Newsletter signup",
  "class": "index-newsletter_signup-section",
  "settings": [
    {
        "type": "text",
        "id": "heading",
        "label": "Heading"
    },
    {
        "type": "text",
        "id": "sub_heading",
        "label": "Subheading"
    },
    {
      "type": "checkbox",
      "id": "social_sharing_blog",
      "label": "Show social sharing buttons",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_blocks",
      "label": "Show bottom blocks",
      "default": true
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color"
    }
  ]
}
{% endschema %}