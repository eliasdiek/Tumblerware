<!-- /templates/blog.liquid -->
{% paginate blog.articles by 9 %}
<div class="blog-page-wrapper">
  <div class="last-post">
    <a class="article__featured-image-link" href="{{ blog.articles[0].url }}">
      <noscript>
        {{ article.image | img_url: '2048x2048' | img_tag: article.title | escape }}
      </noscript>
      {% assign img_url = blog.articles[0].image | img_url: '1920x' %}
      <div class="article__featured-image-wrapper" style="background-image: url({{img_url}});"></div>
    </a>
    <h2 class="h1 text-center blog-title"><a class="article__heading-link" href="{{ blog.articles[0].url }}">{{ blog.articles[0].title }}</a></h2>
    <a class="article__heading-link" href="{{ blog.articles[0].url }}">
    <div class="rte rte--indented-images blog-content">
      {{ blog.articles[0].excerpt_or_content | strip_html | truncatewords: 30 }}
    </div>
      </a>
    <div class="meta-data">
      <ul class="blog-meta-list">
        <li class="meta-item">{{ blog.articles[0].published_at | date: format: 'date' }}</li>
        <li>|</li>
        <li class="meta-item">{{ blog.articles[0].comments_count }} Comment</li>
        <li>|</li>
        <li class="meta-item">{{ blog.articles[0].author }}</li>
      </ul>
    </div>
  </div>
  
  <div class="grid blog-list">
    {%- assign index = 0 -%} 
    {% for article in blog.articles offset:1 %}
    {% assign article_content = article.excerpt_or_content %}
    <div class="grid__item small--one-whole medium--one-half large--one-quarter blog-item">
      <a class="blog__featured-image-link" href="{{ article.url }}">
        <noscript>
          {{ article.image | img_url: '2048x2048' | img_tag: article.title | escape }}
        </noscript>
        <div class="blog__featured-image-wrapper">
          {% assign img_url = article.image | img_url: '450x450', crop: 'center' %}
          <img class="blog__featured-image lazyload"
               src="{{ img_url }}"
               data-src="{{ img_url }}"
               data-widths="[360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
               data-aspectratio="{{ article.image.aspect_ratio }}"
               data-sizes="auto"
               alt="{{ article.title | escape }}">
        </div>
       </a>
       <div class="article-content-wrapper">
        <a class="article__heading-link" href="{{ article.url }}">
          <h2 class="h3 blog-title">{{ article.title }}</h2>
          <div class="rte rte--indented-images">
            {{ article_content | strip_html | truncatewords: 15 }}
          </div>
        </a>
		<ul class="article-meta">
          <li><time pubdate="" datetime="2019-07-29">{{ article.published_at | date: format: 'date' }}</time></li>
          <li>{{ article.author }}</li>
         </ul>
       </div>
    </div>
    
    {% assign index = index | plus: 1 %}
    {% assign devided = index | modulo: 4 %}
    {% if devided == 0 %}
    	<hr class="hr--clear">
    {% endif %}
    {% endfor %}
  </div>
  
  <div class="pagination_details text-center">
    {% if blog.articles_count > paginate.page_size %}
      {% if paginate.current_page > 0 %}
      {% assign temp = paginate.current_page | minus: 1 %}
      {% assign temp1 = temp | times: 9 %}
      {% assign start = temp1 | plus: 1 %}
      {% assign end = start | plus: 8 %}
      {% endif %}
      {% assign total = paginate.page_size | times: paginate.pages %}
   	{% else %}
    	{% assign start = 1 %}
    	{% assign end = blog.articles_count %}
    	{% assign total = blog.articles_count %}
    {% endif %}
    <p>Showing {{ start }}-{{end}} Of {{total}} </p>
  </div>
  {% if paginate.pages > 1 %}
    {% include 'pagination' %}
  {% endif %}
  
{% endpaginate %}
  
  <script>
    setTimeout(function() {
      var article_height = $(".blog-item:nth-child(1)").height();
      console.log('[article height]', article_height);
    }, 100);
  </script>
</div>
